{
  "verification_summary": {
    "start_time": "2025-06-01T20:15:30.141561",
    "end_time": "2025-06-01T20:15:42.447866",
    "duration_seconds": 12.306305,
    "migration_successful": false,
    "all_tests_passed": false,
    "vector_double_references_found": 63,
    "files_checked": 424,
    "critical_issues_count": 3,
    "warnings_count": 0
  },
  "detailed_results": {
    "migration_verification": {
      "vector_double_references": [
        {
          "file_path": "/Users/tdyar/ws/rag-templates/jdbc_exploration/iris_jdbc_connector.py",
          "line_number": 206,
          "content": "TO_VECTOR(?, 'DOUBLE', 3),",
          "timestamp": "2025-06-01T20:15:30.167449"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/jdbc_exploration/iris_jdbc_connector.py",
          "line_number": 221,
          "content": "TO_VECTOR(embedding, 'DOUBLE', 384),",
          "timestamp": "2025-06-01T20:15:30.167737"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/jdbc_exploration/iris_jdbc_connector.py",
          "line_number": 222,
          "content": "TO_VECTOR(?, 'DOUBLE', 384)",
          "timestamp": "2025-06-01T20:15:30.168344"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/jdbc_exploration/quick_jdbc_test_fixed.py",
          "line_number": 125,
          "content": "TO_VECTOR(?, 'DOUBLE', 3),",
          "timestamp": "2025-06-01T20:15:30.169810"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/jdbc_exploration/quick_jdbc_test_fixed.py",
          "line_number": 144,
          "content": "TO_VECTOR(embedding, 'DOUBLE', 384),",
          "timestamp": "2025-06-01T20:15:30.169910"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/jdbc_exploration/quick_jdbc_test_fixed.py",
          "line_number": 145,
          "content": "TO_VECTOR(?, 'DOUBLE', 384)",
          "timestamp": "2025-06-01T20:15:30.169966"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/tests/test_hnsw_integration.py",
          "line_number": 364,
          "content": "VECTOR_COSINE(embedding, TO_VECTOR(?, 'DOUBLE', 768)) as similarity",
          "timestamp": "2025-06-01T20:15:30.183081"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/tests/test_hnsw_integration.py",
          "line_number": 376,
          "content": "VECTOR_COSINE(embedding, TO_VECTOR(?, 'DOUBLE', 768)) as similarity",
          "timestamp": "2025-06-01T20:15:30.183256"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/tests/test_hnsw_integration.py",
          "line_number": 451,
          "content": "VECTOR_COSINE(embedding, TO_VECTOR(?, 'DOUBLE', 768)) as similarity",
          "timestamp": "2025-06-01T20:15:30.183366"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/tests/test_hnsw_query_patterns.py",
          "line_number": 121,
          "content": "VECTOR_COSINE(embedding, TO_VECTOR(?, 'DOUBLE', 768)) as similarity",
          "timestamp": "2025-06-01T20:15:30.194886"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/tests/test_hnsw_query_patterns.py",
          "line_number": 171,
          "content": "VECTOR_COSINE(embedding, TO_VECTOR(?, 'DOUBLE', 768)) as similarity",
          "timestamp": "2025-06-01T20:15:30.194944"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/tests/test_hnsw_query_patterns.py",
          "line_number": 233,
          "content": "VECTOR_COSINE(embedding, TO_VECTOR(?, 'DOUBLE', 768)) as similarity",
          "timestamp": "2025-06-01T20:15:30.194999"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/tests/test_hnsw_query_patterns.py",
          "line_number": 298,
          "content": "VECTOR_COSINE(embedding, TO_VECTOR(?, 'DOUBLE', 768)) as similarity",
          "timestamp": "2025-06-01T20:15:30.195049"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/tests/test_hnsw_query_patterns.py",
          "line_number": 385,
          "content": "VECTOR_COSINE(embedding, TO_VECTOR(?, 'DOUBLE', 768)) as similarity",
          "timestamp": "2025-06-01T20:15:30.195107"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/tests/test_hnsw_query_patterns.py",
          "line_number": 527,
          "content": "VECTOR_COSINE(embedding, TO_VECTOR(?, 'DOUBLE', 768)) as similarity",
          "timestamp": "2025-06-01T20:15:30.195364"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/tests/test_hnsw_performance.py",
          "line_number": 170,
          "content": "VECTOR_COSINE(embedding, TO_VECTOR(?, 'DOUBLE', 768)) as similarity",
          "timestamp": "2025-06-01T20:15:30.197978"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/tests/test_hnsw_performance.py",
          "line_number": 187,
          "content": "VECTOR_COSINE(embedding, TO_VECTOR(?, 'DOUBLE', 768)) as similarity",
          "timestamp": "2025-06-01T20:15:30.198025"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/tests/test_hnsw_performance.py",
          "line_number": 256,
          "content": "VECTOR_COSINE(embedding, TO_VECTOR(?, 'DOUBLE', 768)) as similarity",
          "timestamp": "2025-06-01T20:15:30.198130"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/tests/test_hnsw_performance.py",
          "line_number": 372,
          "content": "VECTOR_COSINE(embedding, TO_VECTOR(?, 'DOUBLE', 768)) as similarity",
          "timestamp": "2025-06-01T20:15:30.198221"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/tests/test_hnsw_performance.py",
          "line_number": 445,
          "content": "VECTOR_COSINE(embedding, TO_VECTOR(?, 'DOUBLE', 768)) as similarity",
          "timestamp": "2025-06-01T20:15:30.198272"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/tests/test_hnsw_performance.py",
          "line_number": 534,
          "content": "VECTOR_COSINE(embedding, TO_VECTOR(?, 'DOUBLE', 768)) as similarity",
          "timestamp": "2025-06-01T20:15:30.198328"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/tests/test_hnsw_indexes.py",
          "line_number": 125,
          "content": "VECTOR_COSINE(embedding, TO_VECTOR('[{query_str}]', 'DOUBLE', 768)) as similarity",
          "timestamp": "2025-06-01T20:15:30.204565"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/tests/test_hnsw_indexes.py",
          "line_number": 128,
          "content": "ORDER BY VECTOR_COSINE(embedding, TO_VECTOR('[{query_str}]', 'DOUBLE', 768)) DESC",
          "timestamp": "2025-06-01T20:15:30.204624"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/tests/test_hnsw_benchmark_integration.py",
          "line_number": 150,
          "content": "VECTOR_COSINE(embedding, TO_VECTOR(?, 'DOUBLE', 768)) as similarity",
          "timestamp": "2025-06-01T20:15:30.214752"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/tests/test_hnsw_benchmark_integration.py",
          "line_number": 163,
          "content": "VECTOR_COSINE(embedding, TO_VECTOR(?, 'DOUBLE', 768)) as similarity",
          "timestamp": "2025-06-01T20:15:30.214793"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/tests/test_hnsw_benchmark_integration.py",
          "line_number": 414,
          "content": "VECTOR_COSINE(embedding, TO_VECTOR(?, 'DOUBLE', 768)) as similarity",
          "timestamp": "2025-06-01T20:15:30.214922"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/docs/iris_vector_error_example.py",
          "line_number": 23,
          "content": "TO_VECTOR(embedding, 'DOUBLE', 384),",
          "timestamp": "2025-06-01T20:15:30.219040"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/docs/iris_vector_error_example.py",
          "line_number": 24,
          "content": "TO_VECTOR('{embedding_str}', 'DOUBLE', 384)",
          "timestamp": "2025-06-01T20:15:30.219079"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/chunking/direct_v2_chunking_service.py",
          "line_number": 92,
          "content": ") VALUES (?, ?, ?, ?, ?, ?, TO_VECTOR('{vector_str}', 'DOUBLE', 384))",
          "timestamp": "2025-06-01T20:15:30.219963"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/chunking/direct_chunking_final.py",
          "line_number": 174,
          "content": "SET chunk_embedding_vector = TO_VECTOR(embedding, 'DOUBLE', 384)",
          "timestamp": "2025-06-01T20:15:30.220507"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/chunking/update_v2_vectors.py",
          "line_number": 54,
          "content": "update_sql = f\"UPDATE RAG.DocumentChunks_V2 SET chunk_embedding_vector = TO_VECTOR(embedding, 'DOUBLE', 384) WHERE chunk_id = '{chunk_id}'\"",
          "timestamp": "2025-06-01T20:15:30.223205"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/chunking/direct_v2_chunking_service_simple.py",
          "line_number": 82,
          "content": "SET chunk_embedding_vector = TO_VECTOR('{embedding_str}', 'DOUBLE', 384)",
          "timestamp": "2025-06-01T20:15:30.223599"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/common/vector_sql_utils.py",
          "line_number": 157,
          "content": "select_clause += f\", VECTOR_COSINE({vector_column}, TO_VECTOR('{vector_string}', 'DOUBLE', {embedding_dim})) AS score\"",
          "timestamp": "2025-06-01T20:15:30.231172"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/comprehensive_sql_cleanup_and_vector_implementation.py",
          "line_number": 175,
          "content": "cursor.execute(f\"SELECT TO_VECTOR('{test_embedding}', 'DOUBLE', 5) AS vector_result\")",
          "timestamp": "2025-06-01T20:15:30.271424"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/comprehensive_sql_cleanup_and_vector_implementation.py",
          "line_number": 203,
          "content": "TO_VECTOR('{embedding1}', 'DOUBLE', 5),",
          "timestamp": "2025-06-01T20:15:30.271469"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/comprehensive_sql_cleanup_and_vector_implementation.py",
          "line_number": 204,
          "content": "TO_VECTOR('{embedding2}', 'DOUBLE', 5)",
          "timestamp": "2025-06-01T20:15:30.271492"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/comprehensive_sql_cleanup_and_vector_implementation.py",
          "line_number": 237,
          "content": "set {embedding_vector} = $$$TO_VECTOR({embedding_str}, \"DOUBLE\", 768)",
          "timestamp": "2025-06-01T20:15:30.271529"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/comprehensive_sql_cleanup_and_vector_implementation.py",
          "line_number": 377,
          "content": "set {embedding_vector} = $$$TO_VECTOR({embedding_str}, \"DOUBLE\", 768)",
          "timestamp": "2025-06-01T20:15:30.271598"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/convert_varchar_to_vector_columns.py",
          "line_number": 212,
          "content": "SET {new_column_name} = TO_VECTOR(?, 'DOUBLE', {dimension})",
          "timestamp": "2025-06-01T20:15:30.291647"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/investigate_vector_indexing_reality.py",
          "line_number": 251,
          "content": "TO_VECTOR(embedding, 'DOUBLE', 768),",
          "timestamp": "2025-06-01T20:15:30.292190"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/investigate_vector_indexing_reality.py",
          "line_number": 252,
          "content": "TO_VECTOR('{test_vector}', 'DOUBLE', 768)",
          "timestamp": "2025-06-01T20:15:30.292222"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/fair_v2_performance_comparison.py",
          "line_number": 31,
          "content": "TO_VECTOR(embedding, 'DOUBLE', 384),",
          "timestamp": "2025-06-01T20:15:30.296905"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/fair_v2_performance_comparison.py",
          "line_number": 32,
          "content": "TO_VECTOR('{query_embedding_str}', 'DOUBLE', 384)",
          "timestamp": "2025-06-01T20:15:30.296961"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/testing/test_iris_vector_bug_dbapi.py",
          "line_number": 89,
          "content": "VECTOR_COSINE(TO_VECTOR(embedding, 'DOUBLE', 3),",
          "timestamp": "2025-06-01T20:15:32.683444"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/testing/test_iris_vector_bug_dbapi.py",
          "line_number": 98,
          "content": "SELECT id, name, TO_VECTOR(embedding, 'DOUBLE', 3) as vector_result",
          "timestamp": "2025-06-01T20:15:32.683487"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/testing/test_iris_vector_colon_bug.py",
          "line_number": 78,
          "content": "VECTOR_COSINE(document_embedding_vector, TO_VECTOR(?, 'DOUBLE')) AS similarity_score",
          "timestamp": "2025-06-01T20:15:32.684074"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/testing/test_iris_vector_colon_bug.py",
          "line_number": 99,
          "content": "VECTOR_COSINE(document_embedding_vector, TO_VECTOR('{query_embedding_str}', 'DOUBLE')) AS similarity_score",
          "timestamp": "2025-06-01T20:15:32.684274"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/testing/test_hnsw_syntax_systematic.py",
          "line_number": 50,
          "content": "VECTOR_COSINE(document_embedding_vector, TO_VECTOR('{query_embedding_str}', 'DOUBLE')) AS similarity_score",
          "timestamp": "2025-06-01T20:15:32.685222"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/testing/test_hnsw_syntax_systematic.py",
          "line_number": 53,
          "content": "AND VECTOR_COSINE(document_embedding_vector, TO_VECTOR('{query_embedding_str}', 'DOUBLE')) > 0.1",
          "timestamp": "2025-06-01T20:15:32.685252"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/testing/test_hnsw_syntax_systematic.py",
          "line_number": 63,
          "content": "VECTOR_COSINE(document_embedding_vector, TO_VECTOR(?, 'DOUBLE')) AS similarity_score",
          "timestamp": "2025-06-01T20:15:32.685278"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/testing/test_hnsw_syntax_systematic.py",
          "line_number": 66,
          "content": "AND VECTOR_COSINE(document_embedding_vector, TO_VECTOR(?, 'DOUBLE')) > ?",
          "timestamp": "2025-06-01T20:15:32.685297"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/testing/test_hnsw_syntax_systematic.py",
          "line_number": 88,
          "content": "VECTOR_DOT_PRODUCT(document_embedding_vector, TO_VECTOR('{query_embedding_str}', 'DOUBLE')) AS similarity_score",
          "timestamp": "2025-06-01T20:15:32.685394"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/testing/test_hnsw_syntax_systematic.py",
          "line_number": 100,
          "content": "VECTOR_COSINE(document_embedding_vector, TO_VECTOR('{query_embedding_str}', 'DOUBLE')) AS similarity_score",
          "timestamp": "2025-06-01T20:15:32.685415"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/testing/test_hnsw_syntax_systematic.py",
          "line_number": 120,
          "content": "VECTOR_COSINE(document_embedding_vector, TO_VECTOR(?, 'DOUBLE')) AS similarity_score",
          "timestamp": "2025-06-01T20:15:32.685441"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/testing/test_hnsw_syntax_systematic.py",
          "line_number": 123,
          "content": "AND VECTOR_COSINE(document_embedding_vector, TO_VECTOR(?, 'DOUBLE')) > ?",
          "timestamp": "2025-06-01T20:15:32.685459"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/testing/test_iris_vector_bugs_minimal_demo.py",
          "line_number": 116,
          "content": "VECTOR_COSINE(TO_VECTOR(embedding, 'DOUBLE', 3),",
          "timestamp": "2025-06-01T20:15:32.686009"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/testing/test_iris_vector_bugs_minimal_demo.py",
          "line_number": 137,
          "content": "VECTOR_COSINE(TO_VECTOR(embedding, 'DOUBLE', 3),",
          "timestamp": "2025-06-01T20:15:32.686040"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/testing/test_iris_vector_bugs_minimal_demo.py",
          "line_number": 138,
          "content": "TO_VECTOR(?, 'DOUBLE', 3)) as similarity",
          "timestamp": "2025-06-01T20:15:32.686063"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/testing/test_iris_vector_bugs_minimal_demo.py",
          "line_number": 161,
          "content": "VECTOR_COSINE(TO_VECTOR(embedding, 'DOUBLE', 384),",
          "timestamp": "2025-06-01T20:15:32.686092"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/testing/test_iris_vector_bugs_minimal_demo.py",
          "line_number": 162,
          "content": "TO_VECTOR('{long_vector}', 'DOUBLE', 384)) as similarity",
          "timestamp": "2025-06-01T20:15:32.686109"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/scripts/migration/test_vector_query.sql",
          "line_number": 5,
          "content": "SELECT TO_VECTOR('0.1:0.2:0.3', 'DOUBLE', 3);",
          "timestamp": "2025-06-01T20:15:32.698353"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/src/experimental/hybrid_ifind_rag/schema.sql",
          "line_number": 204,
          "content": "VECTOR_COSINE(TO_VECTOR(d.embedding), TO_VECTOR(?, 'DOUBLE')) as similarity_score, -- Assuming embedding is string",
          "timestamp": "2025-06-01T20:15:41.476262"
        },
        {
          "file_path": "/Users/tdyar/ws/rag-templates/src/experimental/hybrid_ifind_rag/schema.sql",
          "line_number": 205,
          "content": "ROW_NUMBER() OVER (ORDER BY VECTOR_COSINE(TO_VECTOR(d.embedding), TO_VECTOR(?, 'DOUBLE')) DESC) as rank_position",
          "timestamp": "2025-06-01T20:15:41.476295"
        }
      ],
      "files_checked": 424,
      "remaining_references_found": true
    },
    "database_tests": {
      "connection_test": {
        "passed": true,
        "error": null,
        "timestamp": "2025-06-01T20:15:42.030920"
      },
      "vector_float_table_creation": {
        "passed": false,
        "error": "java.sql.SQLException: [SQLCODE: <-1>:<Invalid SQL statement>]\r\n[Location: <Prepare>]\r\n[%msg: < ) expected, : found ^INSERT INTO RAG . VectorFloatTest ( id , test_vector , description ) VALUES ( :%qpar(1) , TO_VECTOR ( :%qpar(2) , :%qpar>]",
        "timestamp": "2025-06-01T20:15:42.239279"
      },
      "vector_operations": {
        "passed": false,
        "error": "java.sql.SQLException: [SQLCODE: <-1>:<Invalid SQL statement>]\r\n[Location: <Prepare>]\r\n[%msg: < ) expected, : found ^INSERT INTO RAG . VectorOpsTest ( id , vector1 , vector2 ) VALUES ( :%qpar(1) , TO_VECTOR ( :%qpar(2) , :%qpar>]",
        "timestamp": "2025-06-01T20:15:42.443786"
      },
      "hnsw_indexing": {
        "passed": true,
        "error": null,
        "timestamp": "2025-06-01T20:15:42.447259"
      }
    },
    "rag_pipeline_tests": {
      "basic_rag_test": {
        "passed": false,
        "error": null
      },
      "vector_similarity_search": {
        "passed": false,
        "error": null
      },
      "end_to_end_query": {
        "passed": false,
        "error": null
      }
    },
    "overall_status": {
      "migration_successful": false,
      "all_tests_passed": false,
      "critical_issues": [
        {
          "issue": "VECTOR(DOUBLE) references still found in codebase",
          "timestamp": "2025-06-01T20:15:41.483246"
        },
        {
          "issue": "VECTOR(FLOAT) table creation failed: java.sql.SQLException: [SQLCODE: <-1>:<Invalid SQL statement>]\r\n[Location: <Prepare>]\r\n[%msg: < ) expected, : found ^INSERT INTO RAG . VectorFloatTest ( id , test_vector , description ) VALUES ( :%qpar(1) , TO_VECTOR ( :%qpar(2) , :%qpar>]",
          "timestamp": "2025-06-01T20:15:42.239288"
        },
        {
          "issue": "Vector operations failed: java.sql.SQLException: [SQLCODE: <-1>:<Invalid SQL statement>]\r\n[Location: <Prepare>]\r\n[%msg: < ) expected, : found ^INSERT INTO RAG . VectorOpsTest ( id , vector1 , vector2 ) VALUES ( :%qpar(1) , TO_VECTOR ( :%qpar(2) , :%qpar>]",
          "timestamp": "2025-06-01T20:15:42.443792"
        }
      ],
      "warnings": []
    }
  }
}