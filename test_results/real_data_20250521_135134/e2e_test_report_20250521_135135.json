{"created": 1747849902.054191, "duration": 6.302599191665649, "exitcode": 1, "root": "/Users/tdyar/ws/rag-templates", "environment": {}, "summary": {"error": 7, "passed": 1, "total": 8, "collected": 8}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "tests/test_e2e_rag_pipelines.py", "type": "Module"}]}, {"nodeid": "tests/test_e2e_rag_pipelines.py", "outcome": "passed", "result": [{"nodeid": "tests/test_e2e_rag_pipelines.py::test_basic_rag_with_real_data", "type": "Function", "lineno": 329}, {"nodeid": "tests/test_e2e_rag_pipelines.py::test_hyde_with_real_data", "type": "Function", "lineno": 358}, {"nodeid": "tests/test_e2e_rag_pipelines.py::test_crag_with_real_data", "type": "Function", "lineno": 387}, {"nodeid": "tests/test_e2e_rag_pipelines.py::test_colbert_with_real_data", "type": "Function", "lineno": 417}, {"nodeid": "tests/test_e2e_rag_pipelines.py::test_noderag_with_real_data", "type": "Function", "lineno": 448}, {"nodeid": "tests/test_e2e_rag_pipelines.py::test_graphrag_with_real_data", "type": "Function", "lineno": 479}, {"nodeid": "tests/test_e2e_rag_pipelines.py::test_all_pipelines_with_same_query", "type": "Function", "lineno": 508}, {"nodeid": "tests/test_e2e_rag_pipelines.py::test_verify_real_data_requirements", "type": "Function", "lineno": 613}]}], "tests": [{"nodeid": "tests/test_e2e_rag_pipelines.py::test_basic_rag_with_real_data", "lineno": 329, "outcome": "error", "keywords": ["test_basic_rag_with_real_data", "requires_1000_docs", "requires_real_data", "pytestmark", "test_e2e_rag_pipelines.py", "tests", "rag-templates", ""], "setup": {"duration": 5.7777871250291355, "outcome": "failed", "crash": {"path": "/Users/tdyar/ws/rag-templates/venv_community_test/lib/python3.12/site-packages/_pytest/fixtures.py", "lineno": 770, "message": "Failed: ScopeMismatch: You tried to access the function scoped fixture verify_document_count with a module scoped request object. Requesting fixture stack:\ntests/test_e2e_rag_pipelines.py:75:  def real_iris_connection(verify_document_count)\nRequested fixture:\ntests/conftest_1000docs.py:179:  def verify_document_count(ensure_1000_documents)"}, "stdout": "res iris session iris -U %SYS '##class(Security.Users).Create(\"test\",\"%ALL\",\"test\")' ExecResult(exit_code=0, output=b'')\nInitializing database schema...\nProcessing SQL file: db_init.sql\nExecuting DDL/DML: DROP SCHEMA IF EXISTS RAG CASCADE...\nExecuting DDL/DML: CREATE SCHEMA RAG...\nExecuting DDL/DML: DROP TABLE IF EXISTS RAG.DocumentTokenEmbeddings...\nExecuting DDL/DML: DROP TABLE IF EXISTS RAG.KnowledgeGraphEdges...\nExecuting DDL/DML: DROP TABLE IF EXISTS RAG.KnowledgeGraphNodes...\nExecuting DDL/DML: DROP TABLE IF EXISTS RAG.SourceDocuments...\nExecuting DDL/DML: DROP INDEX IF EXISTS idx_hnsw_source_embeddings...\nExecuting DDL/DML: CREATE TABLE RAG.SourceDocuments (    doc_id VARCHAR(255) PRIMARY KEY,    title VARCHAR(500),    tex...\nExecuting DDL/DML: CREATE TABLE RAG.DocumentTokenEmbeddings (    doc_id VARCHAR(255),    token_sequence_index INTEGER, ...\nExecuting DDL/DML: CREATE TABLE RAG.KnowledgeGraphNodes (    node_id VARCHAR(255) PRIMARY KEY,    node_type VARCHAR(100...\nExecuting DDL/DML: CREATE TABLE RAG.KnowledgeGraphEdges (    edge_id VARCHAR(255),     source_node_id VARCHAR(255),    ...\nProcessing SQL file: vector_similarity.sql\nProcessing SQL file: vector_search_procs.sql\nDatabase schema initialized successfully.\n", "stderr": "INFO:tests.conftest:Starting IRIS testcontainer...\nINFO:tests.conftest:Creating IRIS testcontainer with image: intersystemsdc/iris-community:latest on ARM64\nPulling image testcontainers/ryuk:0.8.1\nINFO:testcontainers.core.container:Pulling image testcontainers/ryuk:0.8.1\nContainer started: 2c80c131eb6b\nINFO:testcontainers.core.container:Container started: 2c80c131eb6b\nWaiting for container <Container: 2c80c131eb6b> with image testcontainers/ryuk:0.8.1 to be ready ...\nINFO:testcontainers.core.waiting_utils:Waiting for container <Container: 2c80c131eb6b> with image testcontainers/ryuk:0.8.1 to be ready ...\nPulling image intersystemsdc/iris-community:latest\nINFO:testcontainers.core.container:Pulling image intersystemsdc/iris-community:latest\nContainer started: b58305166266\nINFO:testcontainers.core.container:Container started: b58305166266\nWaiting for container <Container: b58305166266> with image intersystemsdc/iris-community:latest to be ready ...\nINFO:testcontainers.core.waiting_utils:Waiting for container <Container: b58305166266> with image intersystemsdc/iris-community:latest to be ready ...\nINFO:tests.conftest:IRIS testcontainer started. Connection URL: iris://test:test@localhost:63564/USER\nINFO:tests.conftest:Initializing database schema in testcontainer\n", "log": [{"name": "tests.conftest", "msg": "Starting IRIS testcontainer...", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Users/tdyar/ws/rag-templates/tests/conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 223, "funcName": "iris_testcontainer", "created": 1747849895.770777, "msecs": 770.0, "relativeCreated": 231.93597793579102, "thread": 8572176448, "threadName": "MainThread", "processName": "MainProcess", "process": 47440, "taskName": null, "asctime": "2025-05-21 13:51:35"}, {"name": "tests.conftest", "msg": "Creating IRIS testcontainer with image: intersystemsdc/iris-community:latest on ARM64", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Users/tdyar/ws/rag-templates/tests/conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 239, "funcName": "iris_testcontainer", "created": 1747849895.827272, "msecs": 827.0, "relativeCreated": 288.43092918395996, "thread": 8572176448, "threadName": "MainThread", "processName": "MainProcess", "process": 47440, "taskName": null, "asctime": "2025-05-21 13:51:35"}, {"name": "testcontainers.core.container", "msg": "Pulling image testcontainers/ryuk:0.8.1", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Users/tdyar/ws/rag-templates/venv_community_test/lib/python3.12/site-packages/testcontainers/core/container.py", "filename": "container.py", "module": "container", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 98, "funcName": "start", "created": 1747849895.846625, "msecs": 846.0, "relativeCreated": 307.7840805053711, "thread": 8572176448, "threadName": "MainThread", "processName": "MainProcess", "process": 47440, "taskName": null, "asctime": "2025-05-21 13:51:35"}, {"name": "testcontainers.core.container", "msg": "Container started: 2c80c131eb6b", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Users/tdyar/ws/rag-templates/venv_community_test/lib/python3.12/site-packages/testcontainers/core/container.py", "filename": "container.py", "module": "container", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 125, "funcName": "start", "created": 1747849895.953162, "msecs": 953.0, "relativeCreated": 414.3209457397461, "thread": 8572176448, "threadName": "MainThread", "processName": "MainProcess", "process": 47440, "taskName": null, "asctime": "2025-05-21 13:51:35"}, {"name": "testcontainers.core.waiting_utils", "msg": "Waiting for container <Container: 2c80c131eb6b> with image testcontainers/ryuk:0.8.1 to be ready ...", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Users/tdyar/ws/rag-templates/venv_community_test/lib/python3.12/site-packages/testcontainers/core/waiting_utils.py", "filename": "waiting_utils.py", "module": "waiting_utils", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 52, "funcName": "wrapper", "created": 1747849896.9744089, "msecs": 974.0, "relativeCreated": 1435.567855834961, "thread": 8572176448, "threadName": "MainThread", "processName": "MainProcess", "process": 47440, "taskName": null, "asctime": "2025-05-21 13:51:36"}, {"name": "testcontainers.core.container", "msg": "Pulling image intersystemsdc/iris-community:latest", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Users/tdyar/ws/rag-templates/venv_community_test/lib/python3.12/site-packages/testcontainers/core/container.py", "filename": "container.py", "module": "container", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 98, "funcName": "start", "created": 1747849896.977142, "msecs": 977.0, "relativeCreated": 1438.3010864257812, "thread": 8572176448, "threadName": "MainThread", "processName": "MainProcess", "process": 47440, "taskName": null, "asctime": "2025-05-21 13:51:36"}, {"name": "testcontainers.core.container", "msg": "Container started: b58305166266", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Users/tdyar/ws/rag-templates/venv_community_test/lib/python3.12/site-packages/testcontainers/core/container.py", "filename": "container.py", "module": "container", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 125, "funcName": "start", "created": 1747849897.1056378, "msecs": 105.0, "relativeCreated": 1566.7967796325684, "thread": 8572176448, "threadName": "MainThread", "processName": "MainProcess", "process": 47440, "taskName": null, "asctime": "2025-05-21 13:51:37"}, {"name": "testcontainers.core.waiting_utils", "msg": "Waiting for container <Container: b58305166266> with image intersystemsdc/iris-community:latest to be ready ...", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Users/tdyar/ws/rag-templates/venv_community_test/lib/python3.12/site-packages/testcontainers/core/waiting_utils.py", "filename": "waiting_utils.py", "module": "waiting_utils", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 52, "funcName": "wrapper", "created": 1747849900.226042, "msecs": 226.0, "relativeCreated": 4687.201023101807, "thread": 8572176448, "threadName": "MainThread", "processName": "MainProcess", "process": 47440, "taskName": null, "asctime": "2025-05-21 13:51:40"}, {"name": "tests.conftest", "msg": "IRIS testcontainer started. Connection URL: iris://test:test@localhost:63564/USER", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Users/tdyar/ws/rag-templates/tests/conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 259, "funcName": "iris_testcontainer", "created": 1747849900.2283058, "msecs": 228.0, "relativeCreated": 4689.464807510376, "thread": 8572176448, "threadName": "MainThread", "processName": "MainProcess", "process": 47440, "taskName": null, "asctime": "2025-05-21 13:51:40"}, {"name": "tests.conftest", "msg": "Initializing database schema in testcontainer", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Users/tdyar/ws/rag-templates/tests/conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 290, "funcName": "iris_testcontainer_connection", "created": 1747849900.3904681, "msecs": 390.0, "relativeCreated": 4851.6271114349365, "thread": 8572176448, "threadName": "MainThread", "processName": "MainProcess", "process": 47440, "taskName": null, "asctime": "2025-05-21 13:51:40"}], "longrepr": "ScopeMismatch: You tried to access the function scoped fixture verify_document_count with a module scoped request object. Requesting fixture stack:\ntests/test_e2e_rag_pipelines.py:75:  def real_iris_connection(verify_document_count)\nRequested fixture:\ntests/conftest_1000docs.py:179:  def verify_document_count(ensure_1000_documents)"}, "teardown": {"duration": 0.00026699999580159783, "outcome": "passed"}}, {"nodeid": "tests/test_e2e_rag_pipelines.py::test_hyde_with_real_data", "lineno": 358, "outcome": "error", "keywords": ["test_hyde_with_real_data", "requires_1000_docs", "requires_real_data", "pytestmark", "test_e2e_rag_pipelines.py", "tests", "rag-templates", ""], "setup": {"duration": 0.00044829200487583876, "outcome": "failed", "crash": {"path": "/Users/tdyar/ws/rag-templates/venv_community_test/lib/python3.12/site-packages/_pytest/fixtures.py", "lineno": 770, "message": "Failed: ScopeMismatch: You tried to access the function scoped fixture verify_document_count with a module scoped request object. Requesting fixture stack:\ntests/test_e2e_rag_pipelines.py:75:  def real_iris_connection(verify_document_count)\nRequested fixture:\ntests/conftest_1000docs.py:179:  def verify_document_count(ensure_1000_documents)"}, "longrepr": "ScopeMismatch: You tried to access the function scoped fixture verify_document_count with a module scoped request object. Requesting fixture stack:\ntests/test_e2e_rag_pipelines.py:75:  def real_iris_connection(verify_document_count)\nRequested fixture:\ntests/conftest_1000docs.py:179:  def verify_document_count(ensure_1000_documents)"}, "teardown": {"duration": 0.00012345798313617706, "outcome": "passed"}}, {"nodeid": "tests/test_e2e_rag_pipelines.py::test_crag_with_real_data", "lineno": 387, "outcome": "error", "keywords": ["test_crag_with_real_data", "requires_1000_docs", "requires_real_data", "pytestmark", "test_e2e_rag_pipelines.py", "tests", "rag-templates", ""], "setup": {"duration": 0.0005652499967254698, "outcome": "failed", "crash": {"path": "/Users/tdyar/ws/rag-templates/venv_community_test/lib/python3.12/site-packages/_pytest/fixtures.py", "lineno": 770, "message": "Failed: ScopeMismatch: You tried to access the function scoped fixture verify_document_count with a module scoped request object. Requesting fixture stack:\ntests/test_e2e_rag_pipelines.py:75:  def real_iris_connection(verify_document_count)\nRequested fixture:\ntests/conftest_1000docs.py:179:  def verify_document_count(ensure_1000_documents)"}, "longrepr": "ScopeMismatch: You tried to access the function scoped fixture verify_document_count with a module scoped request object. Requesting fixture stack:\ntests/test_e2e_rag_pipelines.py:75:  def real_iris_connection(verify_document_count)\nRequested fixture:\ntests/conftest_1000docs.py:179:  def verify_document_count(ensure_1000_documents)"}, "teardown": {"duration": 0.00010470801498740911, "outcome": "passed"}}, {"nodeid": "tests/test_e2e_rag_pipelines.py::test_colbert_with_real_data", "lineno": 417, "outcome": "error", "keywords": ["test_colbert_with_real_data", "requires_1000_docs", "requires_real_data", "pytestmark", "test_e2e_rag_pipelines.py", "tests", "rag-templates", ""], "setup": {"duration": 0.00031391700031235814, "outcome": "failed", "crash": {"path": "/Users/tdyar/ws/rag-templates/venv_community_test/lib/python3.12/site-packages/_pytest/fixtures.py", "lineno": 770, "message": "Failed: ScopeMismatch: You tried to access the function scoped fixture verify_document_count with a module scoped request object. Requesting fixture stack:\ntests/test_e2e_rag_pipelines.py:75:  def real_iris_connection(verify_document_count)\nRequested fixture:\ntests/conftest_1000docs.py:179:  def verify_document_count(ensure_1000_documents)"}, "longrepr": "ScopeMismatch: You tried to access the function scoped fixture verify_document_count with a module scoped request object. Requesting fixture stack:\ntests/test_e2e_rag_pipelines.py:75:  def real_iris_connection(verify_document_count)\nRequested fixture:\ntests/conftest_1000docs.py:179:  def verify_document_count(ensure_1000_documents)"}, "teardown": {"duration": 0.00014562503201887012, "outcome": "passed"}}, {"nodeid": "tests/test_e2e_rag_pipelines.py::test_noderag_with_real_data", "lineno": 448, "outcome": "error", "keywords": ["test_noderag_with_real_data", "requires_1000_docs", "requires_real_data", "pytestmark", "test_e2e_rag_pipelines.py", "tests", "rag-templates", ""], "setup": {"duration": 0.000334459007717669, "outcome": "failed", "crash": {"path": "/Users/tdyar/ws/rag-templates/venv_community_test/lib/python3.12/site-packages/_pytest/fixtures.py", "lineno": 770, "message": "Failed: ScopeMismatch: You tried to access the function scoped fixture verify_document_count with a module scoped request object. Requesting fixture stack:\ntests/test_e2e_rag_pipelines.py:75:  def real_iris_connection(verify_document_count)\nRequested fixture:\ntests/conftest_1000docs.py:179:  def verify_document_count(ensure_1000_documents)"}, "longrepr": "ScopeMismatch: You tried to access the function scoped fixture verify_document_count with a module scoped request object. Requesting fixture stack:\ntests/test_e2e_rag_pipelines.py:75:  def real_iris_connection(verify_document_count)\nRequested fixture:\ntests/conftest_1000docs.py:179:  def verify_document_count(ensure_1000_documents)"}, "teardown": {"duration": 0.00010079104686155915, "outcome": "passed"}}, {"nodeid": "tests/test_e2e_rag_pipelines.py::test_graphrag_with_real_data", "lineno": 479, "outcome": "error", "keywords": ["test_graphrag_with_real_data", "requires_1000_docs", "requires_real_data", "pytestmark", "test_e2e_rag_pipelines.py", "tests", "rag-templates", ""], "setup": {"duration": 0.0003047919599339366, "outcome": "failed", "crash": {"path": "/Users/tdyar/ws/rag-templates/venv_community_test/lib/python3.12/site-packages/_pytest/fixtures.py", "lineno": 770, "message": "Failed: ScopeMismatch: You tried to access the function scoped fixture verify_document_count with a module scoped request object. Requesting fixture stack:\ntests/test_e2e_rag_pipelines.py:75:  def real_iris_connection(verify_document_count)\nRequested fixture:\ntests/conftest_1000docs.py:179:  def verify_document_count(ensure_1000_documents)"}, "longrepr": "ScopeMismatch: You tried to access the function scoped fixture verify_document_count with a module scoped request object. Requesting fixture stack:\ntests/test_e2e_rag_pipelines.py:75:  def real_iris_connection(verify_document_count)\nRequested fixture:\ntests/conftest_1000docs.py:179:  def verify_document_count(ensure_1000_documents)"}, "teardown": {"duration": 8.783297380432487e-05, "outcome": "passed"}}, {"nodeid": "tests/test_e2e_rag_pipelines.py::test_all_pipelines_with_same_query", "lineno": 508, "outcome": "error", "keywords": ["test_all_pipelines_with_same_query", "requires_1000_docs", "requires_real_data", "pytestmark", "test_e2e_rag_pipelines.py", "tests", "rag-templates", ""], "setup": {"duration": 0.00042758299969136715, "outcome": "failed", "crash": {"path": "/Users/tdyar/ws/rag-templates/venv_community_test/lib/python3.12/site-packages/_pytest/fixtures.py", "lineno": 770, "message": "Failed: ScopeMismatch: You tried to access the function scoped fixture verify_document_count with a module scoped request object. Requesting fixture stack:\ntests/test_e2e_rag_pipelines.py:75:  def real_iris_connection(verify_document_count)\nRequested fixture:\ntests/conftest_1000docs.py:179:  def verify_document_count(ensure_1000_documents)"}, "longrepr": "ScopeMismatch: You tried to access the function scoped fixture verify_document_count with a module scoped request object. Requesting fixture stack:\ntests/test_e2e_rag_pipelines.py:75:  def real_iris_connection(verify_document_count)\nRequested fixture:\ntests/conftest_1000docs.py:179:  def verify_document_count(ensure_1000_documents)"}, "teardown": {"duration": 7.912499131634831e-05, "outcome": "passed"}}, {"nodeid": "tests/test_e2e_rag_pipelines.py::test_verify_real_data_requirements", "lineno": 613, "outcome": "passed", "keywords": ["test_verify_real_data_requirements", "test_e2e_rag_pipelines.py", "tests", "rag-templates", ""], "setup": {"duration": 7.804099004715681e-05, "outcome": "passed"}, "call": {"duration": 0.0004247920005582273, "outcome": "passed", "stderr": "INFO:tests.test_e2e_rag_pipelines:Verifying real data requirements...\n", "log": [{"name": "tests.test_e2e_rag_pipelines", "msg": "Verifying real data requirements...", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Users/tdyar/ws/rag-templates/tests/test_e2e_rag_pipelines.py", "filename": "test_e2e_rag_pipelines.py", "module": "test_e2e_rag_pipelines", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 622, "funcName": "test_verify_real_data_requirements", "created": 1747849901.566081, "msecs": 566.0, "relativeCreated": 6027.240037918091, "thread": 8572176448, "threadName": "MainThread", "processName": "MainProcess", "process": 47440, "taskName": null, "asctime": "2025-05-21 13:51:41"}]}, "teardown": {"duration": 0.48725495795952156, "outcome": "passed", "stderr": "INFO:tests.conftest:Closed connection to IRIS testcontainer\nINFO:tests.conftest:Stopping IRIS testcontainer...\nINFO:tests.conftest:IRIS testcontainer stopped\n", "log": [{"name": "tests.conftest", "msg": "Closed connection to IRIS testcontainer", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Users/tdyar/ws/rag-templates/tests/conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 299, "funcName": "iris_testcontainer_connection", "created": 1747849901.56797, "msecs": 567.0, "relativeCreated": 6029.1290283203125, "thread": 8572176448, "threadName": "MainThread", "processName": "MainProcess", "process": 47440, "taskName": null, "asctime": "2025-05-21 13:51:41"}, {"name": "tests.conftest", "msg": "Stopping IRIS testcontainer...", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Users/tdyar/ws/rag-templates/tests/conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 265, "funcName": "iris_testcontainer", "created": 1747849901.568314, "msecs": 568.0, "relativeCreated": 6029.473066329956, "thread": 8572176448, "threadName": "MainThread", "processName": "MainProcess", "process": 47440, "taskName": null, "asctime": "2025-05-21 13:51:41"}, {"name": "tests.conftest", "msg": "IRIS testcontainer stopped", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Users/tdyar/ws/rag-templates/tests/conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 267, "funcName": "iris_testcontainer", "created": 1747849902.053252, "msecs": 53.0, "relativeCreated": 6514.410972595215, "thread": 8572176448, "threadName": "MainThread", "processName": "MainProcess", "process": 47440, "taskName": null, "asctime": "2025-05-21 13:51:42"}]}}]}