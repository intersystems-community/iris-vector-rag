# DBeaver Parameterized Queries for Vector Issues

This document provides step-by-step instructions for reproducing the vector issues in IRIS 2025.1 using DBeaver's parameterized query feature. DBeaver allows you to enter queries with `?` parameters and then prompts you for the values.

## Test 1: Parameter Substitution Issues with TO_VECTOR

### Query with Parameter Markers

```sql
SELECT VECTOR_COSINE(
    TO_VECTOR(?, 'double', 384),
    TO_VECTOR(?, 'double', 384)
) AS score
```

### Parameter Values

When prompted, enter these values:

**Parameter 1 (first TO_VECTOR):**
```
-0.07802233297041665,0.016942211730413576,-0.008967703589866807,-0.01424573238044446,0.04588628548970171,0.05244817089907705,-0.031020847128935065,0.011664215530413193,0.10738595534619623,-0.053528770802258666,-0.014489491852947678,0.09783782430360419,0.021620212011382128,0.05900383292216675,-0.10025080351196819,-0.01911724956658277,0.04294439457908144,0.03613114100868109,0.029642237258079067,0.028752424652138363,-0.025236680968080277,-0.004085766150034691,0.08703178645429449,-0.08880411283039212,-0.013100102386630966,0.03842056114154395,-0.011239106477920903,-0.044335276740310174,0.013346648323826718,-0.042981543446929706,0.08166443783735447,0.07470290914926785,0.004724884456552543,0.0885440245986537,-0.08885636652111496,0.0036725457155744657,-0.03736813122048319,0.014755337947798895,-0.07949195195165794,0.013239836424692926,-0.019395095393822885,0.007622900852697727,-0.03588987403307242,0.1196848143861239,0.03108761812964501,0.014790721933548228,-0.07166839600098271,-0.007954980654715744,0.03842297597873163,0.0691276011266855,-0.10085877036833656,-0.02615852095031804,-0.10031449293566114,-0.016024845961792034,0.013156623015491878,-0.03590644519461396,0.007932762616995432,-0.0007628316632013752,-0.009166532927225609,-0.04703865136058352,-0.02768075597739205,-0.09714363504080682,0.05807646002694751,-0.011266706885073282,0.05989808423915459,0.02117666693109595,0.009778033240929167,0.04289292687400533,-0.017663884102465714,-0.04545623740740647,-0.016821780208275492,0.0640447073397079,-0.04793123916393435,0.03736236227301447,-0.012964471171990401,0.11443727090655739,-0.008716382955118994,-0.01782426895809906,0.02174332084054353,-0.03788866801946268,-0.04973622905058061,-0.0218542184471129,0.01052709996334142,-0.005437798568280514,0.0646769237213528,-0.008739548210874665,0.08925800211639584,-0.1449382363110712,0.028007712456276576,0.03057847720791071,-0.009898081957271262,-0.00642759310347832,0.04538521485663063,-0.04025535879929377,-0.0007116576144538331,-0.024632264671437015,0.07257428990618228,0.0724203369433585,0.07982603798146451,0.01747880207821047,0.055581003480819825,0.03185380588318297,0.028209606537708213,-0.02455545563573413,-0.04059483214001935,0.008545590927507174,0.002110496370594254,-0.02050053613089296,0.049269366776792924,-0.12572537734211828,-0.06589360765019343,0.038773702061675436,-0.03654772731374878,0.050474760087745964,0.01430809277898576,-0.06612560623203666,0.07296649557218264,-0.0250643803606164,0.018039253395663663,-0.011738082676950673,-0.015680590532295792,0.06503603905494218,-0.052358828913890765,-0.041925461982074724,-0.06625726723352122,-0.0032187351733564866,0.003830343967406887,-1.211385875780491e-33,-0.06497193358721735,-0.025042936472705134,-0.048822941247154965,0.07248749793590874,-0.00485856845341686,0.0262831364695032,-0.04437477187263576,0.09026346271701192,-0.06905460404894027,-0.014473580328311466,-0.12411763978858714,0.09608181428729273,0.048194382801843176,0.023225309322750017,0.024522627412249795,0.010526335666842516,-0.0496945141004713,0.00905495503685143,-0.05245039809324751,-0.07689403227447077,0.028381590178077173,-0.08514268076234348,0.028199732799122447,-0.030621297469030084,-0.04360003587814897,-0.04451279603261386,0.031808854429687644,-0.13705063308059579,-0.048215723647762415,-0.03626681702053352,-0.06284974372541022,0.0169622438683804,-0.009001441096389626,-0.043275966697235345,-0.025589451659847297,0.06996419179226673,0.018216089689929094,-0.01607869401314434,0.008635483200042168,-0.016206548802478526,-0.04737502159582294,-0.07181128285109391,0.0536846996813043,-0.04235636009900462,-0.005381608368914687,0.01031683878885215,-0.0072762331802017546,-0.04079983901338867,0.02506290281646652,-0.05492429417291236,0.04023077988769749,-0.003934410782784392,-0.024348719957879173,-0.0016161870166524876,0.1362896222181408,-0.017492578963604368,0.01722767628735607,0.053209450816720946,0.01217392667106662,-0.00521580242276294,0.045145247726927996,0.016882619928479236,0.06101918603650251,-0.04788929163593759,-0.04294016481951452,-0.028919030412189968,0.013935603502543196,0.05778550729243592,0.04197186655409084,0.1040187332806727,0.04393362866647695,0.033059369187219856,0.006702423770227709,-0.07930882203969829,-0.0029122120334699616,0.016211032340401284,-0.05071744710679017,-0.10106023970066064,-0.018945088457864058,0.016785851628146164,-0.059432671969193565,-0.04717806437256028,0.045120194056843595,-0.07435954851206647,-0.027269634734413486,-0.06196687396054658,0.04745978761083033,-0.15205076537038112,0.02448995810738131,-0.012207119738944151,0.04147404704863628,0.026036702969057426,-0.037813940475752615,-0.02869010403269061,0.0642412638995949,1.2007708701581837e-33,-0.03392701902890108,-0.09263601406575862,0.00707732850679678,0.011373279575698204,-0.005248838428481202,0.04405333292731247,-0.015222169737135817,-0.023520471680083813,-0.09143675118477543,0.01979279547666851,0.013857484225024636,-0.048470136758484696,-0.004138783168240482,-0.07490763123700692,-0.019962985982685234,0.11073524490142309,-0.0014325682707536289,0.00046689409310735687,-0.03781013137293125,0.027605623174896513,-0.04736552188750606,-0.023792012939996672,-0.014877947071255407,0.07359140248853206,0.08241742441715603,0.05091291556064421,0.08132608619191885,-0.04752845190308449,-0.074818254657704,-0.089666578238981,-0.026524728027139528,-0.05939816035735734,-0.06384721660765716,0.009793577393882176,-0.041961531049741006,0.00916588872937703,0.03273209648901419,-0.004505675781823142,-0.003271558022519262,0.05099689752309279,-0.025545688808238126,0.055230476861899046,-0.0005736338499924429,0.037334012915411705,-0.018350609514962094,-0.04523788690754012,-0.018508759797566283,0.0173008017139831,0.1365169296290731,-0.009502517355685964,0.11545936836404128,0.028456998148966857,-0.0359114348551913,-0.03105451679445344,0.016068471623484855,0.0008214005495271872,-0.09714500406258621,-0.009018091766678673,0.012589570627898502,0.025036490262190517,0.03880976806655916,-0.01489723106216517,-0.018431403872250476,0.009060916477361087,-0.013747632196553533,-0.07047529090983808,-8.157652867079359e-05,0.0766498635311594,-0.070774438632017,-0.008037801731111942,0.046894887373054805,0.013158349192572336,0.04207146601806712,0.030442935963434753,0.06818806066403159,0.01744631281255038,0.07938264631222393,0.0196569143004084,-0.03041622058920231,-0.061144313543422535,-0.005049663659183944,0.015407703715868625,0.048652235007118495,0.06792995084645026,-0.03204403328572699,0.12317269356168752,-0.005115066303076979,0.006359901910266516,0.011422559771762191,0.01966718557778777,0.030688216430688902,0.014548324919718914,-0.006999229054553528,0.06371026226229998,0.10899640202112636,-1.685776338990246e-08,-0.06182174092651867,-0.015051708218122423,-0.05725426715856221,0.002694926274486688,0.012523327530763205,-0.0038362079390022296,-0.013849203509109455,0.06455972555329889,-0.13001986705586333,-0.02569697853454571,0.010711736707463657,-0.04879756161197038,-0.02587870116095584,0.06358632185924656,0.07971948437452105,-0.003885767348854755,0.006960108140367271,-0.010367320109850258,0.04237686370031095,0.05982017542596768,0.011077855959798712,0.08906673634404567,0.02156007371473358,0.10417468279827488,0.005754311135391766,0.049687151131652285,-0.01585498589268633,0.044132938284726,0.15198571999673618,-0.05954319504121024,-0.04222792120749663,0.057703193204196104,-0.05973290372358332,-0.04457269071074218,0.017666604508451002,0.09244155415975047,0.04934584841735552,-0.006129993675355539,-0.11002303890304473,0.036125946687670885,0.055434894543906856,0.0058368500155562,0.0025703579095458125,-0.016082863250620024,0.0463462065638067,0.00043862099607108724,0.05563241124657386,-0.004413452273209982,0.03557166832812225,-0.004861419496100934,-0.00034390219846256885,-0.08406108919617172,0.01255835841649378,0.06122173390335508,0.015458417496871662,-0.02982231113845751,-0.07063095482852877,0.0184117993496514,0.0645730027329879,-0.05334419409139373,-0.017769511985235263,0.0015443297772904875,0.0420279613251614,0.0016035802575702235
```

**Parameter 2 (second TO_VECTOR):**
```
-0.07802233297041665,0.016942211730413576,-0.008967703589866807,-0.01424573238044446,0.04588628548970171,0.05244817089907705,-0.031020847128935065,0.011664215530413193,0.10738595534619623,-0.053528770802258666,-0.014489491852947678,0.09783782430360419,0.021620212011382128,0.05900383292216675,-0.10025080351196819,-0.01911724956658277,0.04294439457908144,0.03613114100868109,0.029642237258079067,0.028752424652138363,-0.025236680968080277,-0.004085766150034691,0.08703178645429449,-0.08880411283039212,-0.013100102386630966,0.03842056114154395,-0.011239106477920903,-0.044335276740310174,0.013346648323826718,-0.042981543446929706,0.08166443783735447,0.07470290914926785,0.004724884456552543,0.0885440245986537,-0.08885636652111496,0.0036725457155744657,-0.03736813122048319,0.014755337947798895,-0.07949195195165794,0.013239836424692926,-0.019395095393822885,0.007622900852697727,-0.03588987403307242,0.1196848143861239,0.03108761812964501,0.014790721933548228,-0.07166839600098271,-0.007954980654715744,0.03842297597873163,0.0691276011266855,-0.10085877036833656,-0.02615852095031804,-0.10031449293566114,-0.016024845961792034,0.013156623015491878,-0.03590644519461396,0.007932762616995432,-0.0007628316632013752,-0.009166532927225609,-0.04703865136058352,-0.02768075597739205,-0.09714363504080682,0.05807646002694751,-0.011266706885073282,0.05989808423915459,0.02117666693109595,0.009778033240929167,0.04289292687400533,-0.017663884102465714,-0.04545623740740647,-0.016821780208275492,0.0640447073397079,-0.04793123916393435,0.03736236227301447,-0.012964471171990401,0.11443727090655739,-0.008716382955118994,-0.01782426895809906,0.02174332084054353,-0.03788866801946268,-0.04973622905058061,-0.0218542184471129,0.01052709996334142,-0.005437798568280514,0.0646769237213528,-0.008739548210874665,0.08925800211639584,-0.1449382363110712,0.028007712456276576,0.03057847720791071,-0.009898081957271262,-0.00642759310347832,0.04538521485663063,-0.04025535879929377,-0.0007116576144538331,-0.024632264671437015,0.07257428990618228,0.0724203369433585,0.07982603798146451,0.01747880207821047,0.055581003480819825,0.03185380588318297,0.028209606537708213,-0.02455545563573413,-0.04059483214001935,0.008545590927507174,0.002110496370594254,-0.02050053613089296,0.049269366776792924,-0.12572537734211828,-0.06589360765019343,0.038773702061675436,-0.03654772731374878,0.050474760087745964,0.01430809277898576,-0.06612560623203666,0.07296649557218264,-0.0250643803606164,0.018039253395663663,-0.011738082676950673,-0.015680590532295792,0.06503603905494218,-0.052358828913890765,-0.041925461982074724,-0.06625726723352122,-0.0032187351733564866,0.003830343967406887,-1.211385875780491e-33,-0.06497193358721735,-0.025042936472705134,-0.048822941247154965,0.07248749793590874,-0.00485856845341686,0.0262831364695032,-0.04437477187263576,0.09026346271701192,-0.06905460404894027,-0.014473580328311466,-0.12411763978858714,0.09608181428729273,0.048194382801843176,0.023225309322750017,0.024522627412249795,0.010526335666842516,-0.0496945141004713,0.00905495503685143,-0.05245039809324751,-0.07689403227447077,0.028381590178077173,-0.08514268076234348,0.028199732799122447,-0.030621297469030084,-0.04360003587814897,-0.04451279603261386,0.031808854429687644,-0.13705063308059579,-0.048215723647762415,-0.03626681702053352,-0.06284974372541022,0.0169622438683804,-0.009001441096389626,-0.043275966697235345,-0.025589451659847297,0.06996419179226673,0.018216089689929094,-0.01607869401314434,0.008635483200042168,-0.016206548802478526,-0.04737502159582294,-0.07181128285109391,0.0536846996813043,-0.04235636009900462,-0.005381608368914687,0.01031683878885215,-0.0072762331802017546,-0.04079983901338867,0.02506290281646652,-0.05492429417291236,0.04023077988769749,-0.003934410782784392,-0.024348719957879173,-0.0016161870166524876,0.1362896222181408,-0.017492578963604368,0.01722767628735607,0.053209450816720946,0.01217392667106662,-0.00521580242276294,0.045145247726927996,0.016882619928479236,0.06101918603650251,-0.04788929163593759,-0.04294016481951452,-0.028919030412189968,0.013935603502543196,0.05778550729243592,0.04197186655409084,0.1040187332806727,0.04393362866647695,0.033059369187219856,0.006702423770227709,-0.07930882203969829,-0.0029122120334699616,0.016211032340401284,-0.05071744710679017,-0.10106023970066064,-0.018945088457864058,0.016785851628146164,-0.059432671969193565,-0.04717806437256028,0.045120194056843595,-0.07435954851206647,-0.027269634734413486,-0.06196687396054658,0.04745978761083033,-0.15205076537038112,0.02448995810738131,-0.012207119738944151,0.04147404704863628,0.026036702969057426,-0.037813940475752615,-0.02869010403269061,0.0642412638995949,1.2007708701581837e-33,-0.03392701902890108,-0.09263601406575862,0.00707732850679678,0.011373279575698204,-0.005248838428481202,0.04405333292731247,-0.015222169737135817,-0.023520471680083813,-0.09143675118477543,0.01979279547666851,0.013857484225024636,-0.048470136758484696,-0.004138783168240482,-0.07490763123700692,-0.019962985982685234,0.11073524490142309,-0.0014325682707536289,0.00046689409310735687,-0.03781013137293125,0.027605623174896513,-0.04736552188750606,-0.023792012939996672,-0.014877947071255407,0.07359140248853206,0.08241742441715603,0.05091291556064421,0.08132608619191885,-0.04752845190308449,-0.074818254657704,-0.089666578238981,-0.026524728027139528,-0.05939816035735734,-0.06384721660765716,0.009793577393882176,-0.041961531049741006,0.00916588872937703,0.03273209648901419,-0.004505675781823142,-0.003271558022519262,0.05099689752309279,-0.025545688808238126,0.055230476861899046,-0.0005736338499924429,0.037334012915411705,-0.018350609514962094,-0.04523788690754012,-0.018508759797566283,0.0173008017139831,0.1365169296290731,-0.009502517355685964,0.11545936836404128,0.028456998148966857,-0.0359114348551913,-0.03105451679445344,0.016068471623484855,0.0008214005495271872,-0.09714500406258621,-0.009018091766678673,0.012589570627898502,0.025036490262190517,0.03880976806655916,-0.01489723106216517,-0.018431403872250476,0.009060916477361087,-0.013747632196553533,-0.07047529090983808,-8.157652867079359e-05,0.0766498635311594,-0.070774438632017,-0.008037801731111942,0.046894887373054805,0.013158349192572336,0.04207146601806712,0.030442935963434753,0.06818806066403159,0.01744631281255038,0.07938264631222393,0.0196569143004084,-0.03041622058920231,-0.061144313543422535,-0.005049663659183944,0.015407703715868625,0.048652235007118495,0.06792995084645026,-0.03204403328572699,0.12317269356168752,-0.005115066303076979,0.006359901910266516,0.011422559771762191,0.01966718557778777,0.030688216430688902,0.014548324919718914,-0.006999229054553528,0.06371026226229998,0.10899640202112636,-1.685776338990246e-08,-0.06182174092651867,-0.015051708218122423,-0.05725426715856221,0.002694926274486688,0.012523327530763205,-0.0038362079390022296,-0.013849203509109455,0.06455972555329889,-0.13001986705586333,-0.02569697853454571,0.010711736707463657,-0.04879756161197038,-0.02587870116095584,0.06358632185924656,0.07971948437452105,-0.003885767348854755,0.006960108140367271,-0.010367320109850258,0.04237686370031095,0.05982017542596768,0.011077855959798712,0.08906673634404567,0.02156007371473358,0.10417468279827488,0.005754311135391766,0.049687151131652285,-0.01585498589268633,0.044132938284726,0.15198571999673618,-0.05954319504121024,-0.04222792120749663,0.057703193204196104,-0.05973290372358332,-0.04457269071074218,0.017666604508451002,0.09244155415975047,0.04934584841735552,-0.006129993675355539,-0.11002303890304473,0.036125946687670885,0.055434894543906856,0.0058368500155562,0.0025703579095458125,-0.016082863250620024,0.0463462065638067,0.00043862099607108724,0.05563241124657386,-0.004413452273209982,0.03557166832812225,-0.004861419496100934,-0.00034390219846256885,-0.08406108919617172,0.01255835841649378,0.06122173390335508,0.015458417496871662,-0.02982231113845751,-0.07063095482852877,0.0184117993496514,0.0645730027329879,-0.05334419409139373,-0.017769511985235263,0.0015443297772904875,0.0420279613251614,0.0016035802575702235
```

### Expected Error

```
[SQLCODE: <-1>:<Invalid SQL statement>]
[Location: <Prepare>]
[%msg: < ) expected, : found ^SELECT VECTOR_COSINE ( TO_VECTOR ( :%qpar(1) , :%qpar>]
```

This error confirms that TO_VECTOR doesn't accept parameter markers in IRIS 2025.1.

## Test 2: View Creation Issues

### Create View with TO_VECTOR

```sql
CREATE VIEW VectorView AS
SELECT 
    id,
    text_content,
    TO_VECTOR(embedding, 'double', 384) AS vector_embedding
FROM VectorIssuesTest
```

### Expected Error

```
[SQLCODE: <-1>:<Invalid SQL statement>]
[Location: <Prepare>]
[%msg: < ) expected, LITERAL ('double') found ^                 TO_VECTOR(embedding, 'double'>]
```

### Create Table with Computed Column

```sql
CREATE TABLE ComputedVectorTest (
    id VARCHAR(100) PRIMARY KEY,
    text_content TEXT,
    embedding VARCHAR(60000),
    vector_embedding AS TO_VECTOR(embedding, 'double', 384)
)
```

### Expected Error

```
[SQLCODE: <-1>:<Invalid SQL statement>]
[Location: <Prepare>]
[%msg: < ) expected, IDENTIFIER (TO_VECTOR) found ^                 vector_embedding AS TO_VECTOR>]
```

### Create Materialized View

```sql
CREATE TABLE MaterializedVectorView AS
SELECT 
    id,
    text_content,
    TO_VECTOR(embedding, 'double', 384) AS vector_embedding
FROM VectorIssuesTest
```

### Expected Error

```
[SQLCODE: <-1>:<Invalid SQL statement>]
[Location: <Prepare>]
[%msg: < ) expected, LITERAL ('double') found ^                     TO_VECTOR(embedding, 'double'>]
```

## Conclusion

These tests confirm that:

1. TO_VECTOR doesn't accept parameter markers in IRIS 2025.1
2. Views, computed columns, and materialized views with TO_VECTOR don't work in IRIS 2025.1

Therefore, the dual-table architecture with ObjectScript triggers, as described in HNSW_INDEXING_RECOMMENDATIONS.md, is the only viable approach for implementing high-performance vector search with HNSW indexing.